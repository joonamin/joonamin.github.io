---
layout: post
title: ì–µì–µë‹¨ì„ ì™¸ìš°ì
pin: false
math: true
mermaid: true
description:
categories: [Problem Solving, Programmers]
tags: [algorithm]
---



## ë¬¸ì œ ë§í¬

[ì–µì–µë‹¨ì„ ì™¸ìš°ì](https://school.programmers.co.kr/learn/courses/30/lessons/138475)



## 1ì°¨ ì•„ì´ë””ì–´

* $$s \leq m \leq e$$ ë¥¼ ë§Œì¡±í•˜ëŠ” $$m$$ì— ëŒ€í•´ì„œ, ì–µì–µë‹¨ì˜ ì •ì˜ì— ì˜í•˜ì—¬ í–‰ê³¼ ì—´ì˜ ê³±ì¸ $$r \times c$$ ë¥¼ ê°’ìœ¼ë¡œ ê°€ì§.
* êµ¬ê°„ ë‚´ì—ì„œì˜ ìµœë¹ˆê°’ì„ êµ¬í•˜ëŠ” ê²ƒì€ ê²°êµ­ $$r \times c$$ ì˜ ê³±ìœ¼ë¡œ í‘œí˜„ë˜ëŠ” ê²½ìš°ì˜ ìˆ˜ê°€ ë§ë‹¤ëŠ” ê²ƒê³¼ ë™ì¹˜
* $$m = r \times c$$ ì´ë¯€ë¡œ,  $$r$$ì„ êµ¬í•˜ëŠ” ê²ƒìœ¼ë¡œ $$c$$ë¥¼ êµ¬í•˜ì§€ ì•Šì•„ë„, ë¹ˆë„ ìˆ˜ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŒ
  * ê²°êµ­, ì•½ìˆ˜ì˜ ê°œìˆ˜ë¥¼ êµ¬í•˜ëŠ” ê²ƒê³¼ ê°™ë‹¤.
* ì•½ìˆ˜ë¥¼ êµ¬í•˜ëŠ” ìˆ˜ì˜ í¬ê¸°ê°€ ìµœëŒ€ $$5 \times 10^6 $$ ì´ë¯€ë¡œ, ì†Œì¸ìˆ˜ë¶„í•´ë¥¼ ì´ìš©í•˜ì—¬ ì•½ìˆ˜ì˜ ê°œìˆ˜ë¥¼ êµ¬í•˜ëŠ” ë°©ì‹ì„ ìƒê°
  * ë ì (`e`) ê°€ ê³ ì •ë˜ì–´ ìˆê³ , $$5 \times 10^6$$ ë²”ìœ„ ë‚´ì—ì„œì˜ ì†Œìˆ˜ë¥¼ êµ¬í•˜ê¸° ìœ„í•´ì„œëŠ” ì—ë¼í† ìŠ¤í…Œë„¤ìŠ¤ì˜ ì²´ë¥¼ ì´ìš©í•œ ë°©ë²•ì´ ì ì ˆí•˜ë‹¤ê³  íŒë‹¨
* ğŸ˜¢ íœ´ë¦¬ìŠ¤í‹±í•˜ê²Œ í†µê³¼í•  ê²ƒì´ë¼ íŒë‹¨í•˜ì˜€ì§€ë§Œ?
  * âŒ ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ì•˜ë‹¤.
  * <img src="https://raw.githubusercontent.com/joonamin/UpicImageRepo/master/uPic/Screenshot%202024-08-15%20at%209.03.24%E2%80%AFPM.png" alt="Screenshot 2024-08-15 at 9.03.24â€¯PM" style="zoom:50%;" />
  * ì‹œì‘ì  ë°°ì—´(`starts`)ê°€ ìµœëŒ€ $$10^5$$ ì¸ë°, ë‚´ë¶€ì ìœ¼ë¡œ ì•½ìˆ˜ì˜ ê°œìˆ˜ë¥¼ êµ¬í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì˜ ì‹œê°„ë³µì¡ë„ëŠ” `êµ¬ê°„ ë‚´ì—ì„œì˜ ì†Œìˆ˜ì˜ ê°œìˆ˜ * ì¸ìˆ˜ ë¶„í•´ì— ê±¸ë¦¬ëŠ” ì—°ì‚°ì˜ íšŸìˆ˜` ì—¬ì„œ ì‹œê°„ ì´ˆê³¼ë¥¼ ë°›ì•˜ë‹¤ê³  íŒë‹¨.



## 1ì°¨ ì†ŒìŠ¤ì½”ë“œ

```c++
#include <string>
#include <vector>

using namespace std;
vector<int> prime_numbers;
bool check(int n) {
    if (n == 2) return true;
    for (int i = 2; i * i <= n; i++) {
        if (n % i == 0) return false;
    }
    return true;
}
void preprocess(int e) {
    vector<bool> is_not_prime(e + 1, false);
    for (int i = 2; i <= e; i++) {
        if (!is_not_prime[i] && check(i)) {
            prime_numbers.push_back(i);
            for (int j = i + i; j <= e; j += i) {
                is_not_prime[j] = true;
            }
        }
    }
}
long long calc(int num) {
    // numì— í•´ë‹¹í•˜ëŠ” ì†Œì¸ìˆ˜ì˜ ê°œìˆ˜ë¥¼ ë°˜í™˜
    long long result = 1L;
    for (auto prime_number : prime_numbers) {
        if (num == 1) break;
        int count = 1;
        while (num % prime_number == 0) {
            count++;
            num /= prime_number;
        }
        result *= count;
    }
    return result;
}
int query(int start, int end) {
    // [start, end] ê¹Œì§€ì˜ ìˆ˜ë“¤ì„ ì†Œì¸ìˆ˜ë¶„í•´í•˜ì—¬, ì¸ìì˜ ê°œìˆ˜ê°€ ê°€ì¥ ë§ì€ ê²ƒì„ ì„ íƒ
    pair<int,long long> res = {-1, -1};
    for (int i = start; i <= end; i++) {
        long long ret = calc(i);
        if (res.second < ret) {
            res = {i, ret};
        }
    }
    return res.first;
}
vector<int> solution(int e, vector<int> starts) {
    vector<int> answer;
    
    preprocess(e);
    for (auto start: starts) {
        answer.push_back(query(start, e));
    }
    return answer;
}
```



## ê°œì„  ë°©ë²•

* `query` ì˜ í˜¸ì¶œíšŸìˆ˜ê°€ ê°€ì¥ ë§ìœ¼ë¯€ë¡œ, í•´ë‹¹ í•¨ìˆ˜ë¥¼ ê°œì„ í•˜ëŠ” ê²ƒì´ íš¨ìœ¨ì ì¼ ê²ƒì´ë¼ íŒë‹¨
* ì˜ ìƒê°í•´ë³´ë©´, `query(s, e)` ì˜ ê°’ì„ êµ¬í–ˆë‹¤ë©´ `query(s - 1, e)` ë¥¼ êµ¬í•  ë•ŒëŠ” $$s - 1$$ì˜ ì•½ìˆ˜ì˜ ê°œìˆ˜ì™€ `query(s, e)` ì—ì„œ êµ¬í–ˆë˜ ìµœë¹ˆê°’ì˜ ì•½ìˆ˜ì˜ ê°œìˆ˜ë§Œ ë¹„êµí•´ì£¼ë©´ ëœë‹¤.
  * *ì´ê²Œ ì‹œê°„ë³µì¡ë„ ìƒìœ¼ë¡œ í¬ê²Œ ê°œì„ ì ì´ ìˆì„ê¹Œ?*
* ëì ì€ ê³ ì •ë˜ì–´ìˆìœ¼ë¯€ë¡œ, `starts` ë°°ì—´ì—ì„œ ë‚˜ì˜¬ ìˆ˜ ìˆëŠ” ìµœì†Ÿê°’ì„ ì¡ê³  í•´ë‹¹ êµ¬ê°„ ì‚¬ì´ì—ì„œ queryê°€ í˜¸ì¶œë  ë•Œ ë§ˆë‹¤, ë©”ëª¨ì´ì œì´ì…˜ëœ ê°’ë“¤ì„ í™œìš©í•´ì„œ êµ¬ê°„ì˜ ìµœë¹ˆê°’ì„ ì´ˆê¸°í™”





## 2ì°¨ ê°œì„  ì†ŒìŠ¤ì½”ë“œ

```c++
#include <string>
#include <vector>
#include <functional>

using namespace std;
bool check(int);
void preprocess(int,int);
long long calc(int);

vector<int> prime_numbers, dp;

bool check(int n) {
    if (n == 2) return true;
    for (int i = 2; i * i <= n; i++) {
        if (n % i == 0) return false;
    }
    return true;
}
void preprocess(int s, int e) {
    vector<bool> is_not_prime(e + 1, false);
    dp.resize(e + 1);
    generate(dp.begin(), dp.end(), [n = 0]() mutable {
        return n++;
    });
    
    for (int i = 2; i <= e; i++) {
        if (!is_not_prime[i] && check(i)) {
            prime_numbers.push_back(i);
            for (int j = i + i; j <= e; j += i) {
                is_not_prime[j] = true;
            }
        }
    }
    
    for (int i = e - 1; i >= s; i--) {
        if (calc(i) >= calc(dp[i + 1])) {
            dp[i] = i;
        } else {
            dp[i] = dp[i + 1];
        }
    }
}
long long calc(int num) {
    // numì— í•´ë‹¹í•˜ëŠ” ì†Œì¸ìˆ˜ì˜ ê°œìˆ˜ë¥¼ ë°˜í™˜
    long long result = 1L;
    for (auto prime_number : prime_numbers) {
        if (num == 1) break;
        int count = 1;
        while (num % prime_number == 0) {
            count++;
            num /= prime_number;
        }
        result *= count;
    }
    return result;
}
vector<int> solution(int e, vector<int> starts) {
    vector<int> answer;
    
    preprocess(*min_element(starts.begin(), starts.end()), e);
    for (auto start: starts) {
        answer.push_back(dp[start]);
    }
    return answer;
}
```

* ê²°ê³¼ëŠ”... ì—­ì‹œë‚˜ ì‹œê°„ ì´ˆê³¼ì˜€ë‹¤..
  * <img src="https://raw.githubusercontent.com/joonamin/UpicImageRepo/master/uPic/Screenshot%202024-08-15%20at%209.38.18%E2%80%AFPM.png" alt="Screenshot 2024-08-15 at 9.38.18â€¯PM" style="zoom:50%;" />

* ì–´ëŠ ë¶€ë¶„ì—ì„œ ê°œì„ ì„ í•´ì•¼í• ê¹Œ..?
  * ì „ì²˜ë¦¬ë¥¼ ë‹´ë‹¹í•˜ëŠ” `preprocess` ë¶€ë¶„ì„ ê°œì„ í•  í•„ìš”ê°€ ìˆë‹¤
  * ì—ë¼í† ìŠ¤í…Œë„¤ìŠ¤ì˜ ì²´ë¥¼ í™œìš©í•œ ì†Œìˆ˜ êµ¬í•˜ê¸° ì•Œê³ ë¦¬ì¦˜ì—ì„œ ì‹œê°„ì´ ì˜¤ë˜ê±¸ë¦¬ëŠ” ê²ƒì¼ê¹Œ?
    * ëŒ€ëµì ìœ¼ë¡œ $$O(N)$$ ì— ê·¼ì‚¬í•œë‹¤ê³  í•œë‹¤.
    * ë”±íˆ, ë¬¸ì œì ìœ¼ë¡œ ë³´ì´ì§€ ì•ŠëŠ”ë‹¤.
  * $$5 \times 10^6$$ ê¹Œì§€ì˜ ì†Œìˆ˜ì˜ ê°œìˆ˜ëŠ” ëŒ€ëµ $$6.7 \times 10^5$$ ê°œ
    * ì†Œì¸ìˆ˜ ë¶„í•´ì— ê±¸ë¦¬ëŠ” ì‹œê°„ì´ ë³‘ëª©ì´ ë  ìˆ˜ë„ ìˆê² ë‹¤ê³  íŒë‹¨
* ì—ë¼í† ìŠ¤í…Œë„¤ìŠ¤ì˜ ì²´ì—ì„œ í™œìš©í–ˆë˜ ê°œë…ì„ ì‘ìš©í•˜ì—¬ êµ¬ê°„ ë‚´ ì„ì˜ì˜ ê°’ $$m$$ ì— ëŒ€í•´ì„œ, ë°°ìˆ˜ê°€ ë˜ëŠ” ê°’ë“¤ì— counterê°’ì„ ì¦ê°€ì‹œí‚¤ëŠ” ì‹ìœ¼ë¡œ $$m$$ ì„ ì•½ìˆ˜ë¡œ ê°€ì§€ëŠ” ìˆ˜ë“¤ì˜ counterë¥¼ ì¦ê°€
  * ì†Œì¸ìˆ˜ ë¶„í•´ë¥¼ ì´ìš©í•˜ì§€ ì•Šê³ ë„, $$O(N)$$ ì— ê·¼ì‚¬í•˜ê²Œ ì•½ìˆ˜ì˜ ê°œìˆ˜ë¥¼ ë©”ëª¨ì´ì œì´ì…˜í•  ìˆ˜ ìˆìŒ



